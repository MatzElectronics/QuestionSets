<html>

<head>
    <title>Position-Time Graph Practice Problems</title>
    <script src="common_utils.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css?family=Roboto');

        body,
        html,
        * {
            font-family: 'Roboto', sans-serif;
            box-sizing: border-box;
        }

        body {
            padding: 50px;
            background: url('polyBkgBlue.svg');
            background-size: cover;
        }

        .bkgLine {
            stroke-width: 1;
            stroke: #eee;
            fill: none;
        }

        .axisLine {
            stroke-width: 1;
            stroke: black;
            fill: none;
        }

        .lineCircle {
            stroke: blue;
            stroke-width: 1;
            fill: #228;
        }

        text {
            font-size: 11px;
            fill: black;
            font-family: sans-serif;
        }

        #p0,
        #p1,
        #p2,
        #p3,
        #p4,
        #p5,
        #p6 {
            font-size: 13px;
            fill: white;
            font-weight: bold;
            font-family: sans-serif;
        }

        #b1,
        #b2,
        #b3,
        #b4,
        #b5,
        #b6 {
            fill: #ccc;
            stroke: none;
        }

        .gLabel {
            fill: black;
            font-family: sans-serif;
            font-size: 10px;

        }

        .gLabelItalic {
            font-size: 13px;
            font-weight: bold;
        }

        button {
            display: inline-block;
            padding: 6px 12px;
            margin-bottom: 0;
            font-size: 12px !important;
            font-weight: 400;
            line-height: 17px;
            text-align: center;
            white-space: nowrap;
            vertical-align: middle;
            -ms-touch-action: manipulation;
            touch-action: manipulation;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            background-image: none;
            border: 1px solid transparent;
            border-radius: 4px;
            color: #fff;
            background-color: #337ab7;
            border-color: #2e6da4;
        }

        button:focus {
            outline: none;
        }

        hr {
            border: 0;
            height: 1px;
            background: #777;
            background-image: linear-gradient(to right, #ddd, #aaa, #ddd);
        }

        table {
            padding: 20px;
            background: #fff;
            border-radius: 5px;
        }
    </style>
</head>

<body>
    <table border="0">
        <tr>
            <td>
                <h3>Position-Time Graph practice problems</h3>

                <h2>Your Score: <span id='score'>0</span> - <span id="codeZ"></h2>
                </span>
                <hr>
                <div id='g1'><svg width="460" height="255">
                        <g transform="translate(40,10)">
                            <path
                                d="M0,0 400,0 M0,20 400,20 M0,40 400,40 M0,60 400,60 M0,80 400,80 M0,100 400,100 M0,120 400,120 M0,140 400,140 M0,160 400,160 M0,180 400,180"
                                class="bkgLine" />
                            <path
                                d="M40,0 40,200 M80,0 80,200 M120,0 120,200 M160,0 160,200 M200,0 200,200 M240,0 240,200 M280,0 280,200 M320,0 320,200 M360,0 360,200 M400,0 400,200 "
                                class="bkgLine" />
                            <path
                                d="M0,0 0,200 
M0,200 400,200 M-5,0 0,0 M-5,20 0,20 M-5,40 0,40 M-5,60 0,60 M-5,80 0,80 M-5,100 0,100 M-5,120 0,120 M-5,140 0,140 M-5,160 0,160 M-5,180 0,180 M-5,200 0,200 M40,200 40,205 M80,200 80,205 M120,200 120,205 M160,200 160,205 M200,200 200,205 M240,200 240,205 M280,200 280,205 M320,200 320,205 M360,200 360,205 M400,200 400,205 "
                                class="axisLine" />
                            <text x='-20' y='205'>0</text>
                            <text x='-20' y='185'>1</text>
                            <text x='-20' y='165'>2</text>
                            <text x='-20' y='145'>3</text>
                            <text x='-20' y='125'>4</text>
                            <text x='-20' y='105'>5</text>
                            <text x='-20' y='85'>6</text>
                            <text x='-20' y='65'>7</text>
                            <text x='-20' y='45'>8</text>
                            <text x='-20' y='25'>9</text>
                            <text x='-25' y='5'>10</text>
                            <text x='-150' y='-30' transform="rotate(-90)"
                                style="font-size:13px; font-weight:bold;">Position
                                (meters)</text>
                            <text x='-3' y='222'>0</text>
                            <text x='33' y='222'>10</text>
                            <text x='73' y='222'>20</text>
                            <text x='113' y='222'>30</text>
                            <text x='153' y='222'>40</text>
                            <text x='193' y='222'>50</text>
                            <text x='233' y='222'>60</text>
                            <text x='273' y='222'>70</text>
                            <text x='313' y='222'>80</text>
                            <text x='353' y='222'>90</text>
                            <text x='390' y='222'>100</text>
                            <text x='150' y='240' style="font-size:13px; font-weight:bold;">Time (seconds)</text>
                            <path id="graphPath" stroke="blue" stroke-width="2.5" fill="none" />
                            <circle id='c0' cx='1' cy='1' r='8' class="lineCircle" />
                            <circle id='c1' cx='1' cy='1' r='8' class="lineCircle" />
                            <circle id='c2' cx='1' cy='1' r='8' class="lineCircle" />
                            <circle id='c3' cx='1' cy='1' r='8' class="lineCircle" />
                            <circle id='c4' cx='1' cy='1' r='8' class="lineCircle" />
                            <circle id='c5' cx='1' cy='1' r='8' class="lineCircle" />
                            <circle id='c6' cx='1' cy='1' r='8' class="lineCircle" />
                            <text id='p0' x='1' y='1'>A</text>
                            <text id='p1' x='1' y='1'>B</text>
                            <text id='p2' x='1' y='1'>C</text>
                            <text id='p3' x='1' y='1'>D</text>
                            <text id='p4' x='1' y='1'>E</text>
                            <text id='p5' x='1' y='1'>F</text>
                            <text id='p6' x='1' y='1'>G</text>
                        </g>
                    </svg></div>
                <div id='g2'>
                    <svg width="300" height="300" id="graphingBlock" onclick="setCoords(evt)">
                        <g>
                            <text x="-190" y="18" class="gLabel gLabelItalic" transform="rotate(-90)">Position
                                (meters)</text>
                            <text x="110" y="294" class="gLabel gLabelItalic">Time (seconds)</text>
                            <path d=" 
      M40,20 40,260
      M60,20 60,260
      M80,20 80,260
      M100,20 100,260
      M120,20 120,260
      M140,20 140,260
      M160,20 160,260
      M180,20 180,260
      M200,20 200,260
      M220,20 220,260
      M240,20 240,260
      M260,20 260,260
      M280,20 280,260
      M40,20 280,20
      M40,40 280,40
      M40,60 280,60
      M40,80 280,80
      M40,100 280,100
      M40,120 280,120
      M40,140 280,140
      M40,160 280,160
      M40,180 280,180
      M40,200 280,200
      M40,220 280,220
      M40,240 280,240
      M40,260 280,260
       " stroke="#eee" stroke-width="1" />
                            <path d=" 
      M40,20 40,260 280,260 M40,20 36,20 M40,60 36,60 M40,100 36,100 M40,140 36,140 M40,180 36,180 M40,220 36,220 M40,260 36,260 
      M40,260 40,264 M80,260 80,264 M120,260 120,264 M160,260 160,264 M200,260 200,264 M240,260 240,264 M280,260 280,264
      " stroke="#000" stroke-width="1" fill="none" />
                        </g>
                        <g>
                            <circle fill="#00f" cx="40" cy="260" r="6" id="circ40" />
                            <circle fill="#00f" cx="80" cy="260" r="6" id="circ80" />
                            <circle fill="#00f" cx="120" cy="260" r="6" id="circ120" />
                            <circle fill="#00f" cx="160" cy="260" r="6" id="circ160" />
                            <circle fill="#00f" cx="200" cy="260" r="6" id="circ200" />
                            <circle fill="#00f" cx="240" cy="260" r="6" id="circ240" />
                            <circle fill="#00f" cx="280" cy="260" r="6" id="circ280" />
                        </g>
                        <path stroke="#00f" stroke-width="2" d="M40,260 280,260" id="gLine" fill="none" />
                        <text x="26" y="23" class="gLabel">6</text>
                        <text x="26" y="63" class="gLabel">5</text>
                        <text x="26" y="103" class="gLabel">4</text>
                        <text x="26" y="143" class="gLabel">3</text>
                        <text x="26" y="183" class="gLabel">2</text>
                        <text x="26" y="223" class="gLabel">1</text>
                        <text x="26" y="263" class="gLabel">0</text>

                        <text y="279" x="38" class="gLabel">0</text>
                        <text y="279" x="74" class="gLabel">10</text>
                        <text y="279" x="114" class="gLabel">20</text>
                        <text y="279" x="154" class="gLabel">30</text>
                        <text y="279" x="194" class="gLabel">40</text>
                        <text y="279" x="234" class="gLabel">50</text>
                        <text y="279" x="274" class="gLabel">60</text>
                    </svg>
                </div>
                <hr>
                <div id="result"></div>
                <div id="result0"></div><br>
                <button onclick="generateGraph();">skip</button>
            </td>
        </tr>
    </table>

    <script>
        var svg = $('#graphingBlock');
        var pt = svg.createSVGPoint(); // Created once for document
        var q = [{}, {}, {}, {}, {}, {}, {}, {}];

        var outPosY = [];
        var aa = [];
        var q2Answer = 0;
        var q3Answer = 0;
        var rr = [0, 0, 0, 0, 0, 0, 0];
        var qTypeList = [0, 1, 2, 3];
        var qType = 0;


        var qText = ['', '', '', ''];

        function setCoords(evt) {
            pt.x = evt.clientX;
            pt.y = evt.clientY;
            // The cursor point, translated into svg coordinates
            var cursorpt = pt.matrixTransform(svg.getScreenCTM().inverse());
            cursorpt.x = Math.round(cursorpt.x / 40) * 40;
            cursorpt.y = Math.round(cursorpt.y / 20) * 20;
            cursorpt.y = cursorpt.y < 0 ? 0 : cursorpt.y;
            cursorpt.y = cursorpt.y > 260 ? 260 : cursorpt.y;
            var thePt = $('#circ' + cursorpt.x);
            thePt.setAttribute('cy', cursorpt.y);
            var outStr = 'M';

            var ii = 0;
            for (var t = 40; t < 290; t += 40) {
                thePt = $('#circ' + t);
                outStr += thePt.getAttribute('cx') + ',' + thePt.getAttribute('cy') + ' ';
                outPosY[ii] = (260 - thePt.getAttribute('cy')) / 40;
                ii++;
            }
            thePt = $('#gLine');
            thePt.setAttribute('d', outStr);
            //$('#result2').innerHTML = outPosY.join(' ');
        }



        var j = [];
        var k = [];

        function generateGraph() {
            var resultElement = $('#result');
            var graphPath = $('#graphPath');
            var a = [0, 0, 0];

            a[0] = Math.floor(Math.random() * 9 + 1);
            do {
                a[1] = Math.floor(Math.random() * 9 + 1);
            } while (a[1] === a[0]);
            do {
                a[2] = Math.floor(Math.random() * 9 + 1);
            } while (a[2] === a[0] || a[2] === a[1]);

            var b = [0, 0, 0];

            b[0] = Math.floor(Math.random() * 3 + 1) * 2;
            b[1] = Math.floor(Math.random() * (8 - b[0]) / 2 + 1) * 2;
            b[2] = 12 - b[0] - b[1];

            var c = [0, 0, 0];

            c[0] = Math.floor(Math.random() * 2 + 1) * 2;
            c[1] = Math.floor(Math.random() * 2 + 1) * 2;
            if (c[0] + c[1] >= 8) {
                if (c[0] > 2) c[0] -= 2;
                else c[1] -= 2;
            }
            c[2] = 8 - c[0] - c[1];


            j[0] = 0
            j[1] = (b[0]) * 5;
            j[2] = (b[0] + c[0]) * 5;
            j[3] = (b[0] + c[0] + b[1]) * 5;
            j[4] = (b[0] + c[0] + b[1] + c[1]) * 5;
            j[5] = (b[0] + c[0] + b[1] + c[1] + b[2]) * 5;
            j[6] = (b[0] + c[0] + b[1] + c[1] + b[2] + c[2]) * 5;


            k[0] = 0;
            k[1] = a[0];
            k[2] = k[1];
            k[3] = a[1];
            k[4] = k[3];
            k[5] = a[2];
            k[6] = k[5];

            var p = [];
            p[0] = [0, 200];
            p[1] = [b[0] * 20, 200 - a[0] * 20];
            p[2] = [b[0] * 20 + c[0] * 20, 200 - a[0] * 20];
            p[3] = [b[0] * 20 + c[0] * 20 + b[1] * 20, 200 - a[1] * 20];
            p[4] = [b[0] * 20 + c[0] * 20 + b[1] * 20 + c[1] * 20, 200 - a[1] * 20];
            p[5] = [b[0] * 20 + c[0] * 20 + b[1] * 20 + c[1] * 20 + b[2] * 20, 200 - a[2] * 20];
            p[6] = [b[0] * 20 + c[0] * 20 + b[1] * 20 + c[1] * 20 + b[2] * 20 + c[2] * 20, 200 - a[2] * 20];

            var outStr2 = 'M' + p.join(' ');
            graphPath.setAttribute('d', outStr2);
            for (var idx = 0; idx < 7; idx++) {
                var tc = $('#c' + idx);
                tc.setAttribute('cx', p[idx][0]);
                tc.setAttribute('cy', p[idx][1]);
                tc = $('#p' + idx);
                tc.setAttribute('x', p[idx][0] - 4.5);
                tc.setAttribute('y', p[idx][1] + 4.5);
            }

            var NAME = names[Math.floor(Math.random() * names.length)];


            aa[0] = ((k[1] - k[0]) > 0 ? 'forward' : 'back');
            aa[1] = Math.abs(k[1] - k[0]);
            aa[2] = (j[1] - j[0]);
            aa[3] = (j[2] - j[1]);
            aa[4] = ((k[3] - k[2]) > 0 ? 'forward' : 'back');
            aa[5] = Math.abs(k[3] - k[2]);
            aa[6] = (j[3] - j[2]);
            aa[7] = (j[4] - j[3]);
            aa[8] = ((k[5] - k[4]) > 0 ? 'forward' : 'back');
            aa[9] = Math.abs(k[5] - k[4]);
            aa[10] = (j[5] - j[4]);
            aa[11] = (j[6] - j[5]);


            qText[2] = NAME +
                " started at the door (0 meters) and<br>walked <select id='qq0'><option value='' selected> </option><option value='forward'>forward</option><option value='back'>back</option></select> <input id='qq1' size='4'> meters for <input id='qq2' size='4'> seconds,<br>stopped for <input id='qq3' size='4'>  seconds,<br>walked <select id='qq4'><option value='' selected> </option><option value='forward'>forward</option><option value='back'>back</option></select> <input id='qq5' size='4'> meters for <input id='qq6' size='4'> seconds,<br>stopped for <input id='qq7' size='4'> seconds,<br>walked <select id='qq8'><option value='' selected> </option><option value='forward'>forward</option><option value='back'>back</option></select> <input id='qq9' size='4'> meters for <input id='qq10' size='4'> seconds,<br>and finally stopped for <input id='qq11' size='4'> seconds.<br><br><button onclick='check1();'>Submit Answers</button>";

            var lineSegments = ['A and B', 'B and C', 'C and D', 'D and E', 'E and F', 'F and G'];
            var lineDirections = ['going forward', 'standing still', 'going back'];

            var qqVal = [0, 0, 1, 2, 2, 2, 2, 3, 4, 4, 4, 4, 5]
            var q2Val = qqVal[Math.floor(Math.random() * qqVal.length)];

            if ((k[q2Val + 1] - k[q2Val]) > 0) q2Answer = 0;
            if ((k[q2Val + 1] - k[q2Val]) == 0) q2Answer = 1;
            if ((k[q2Val + 1] - k[q2Val]) < 0) q2Answer = 2;

            q3Answer = ((k[q2Val + 1] - k[q2Val]) / (j[q2Val + 1] - j[q2Val]));

            qText[0] = 'Between points ' + lineSegments[q2Val] + ', ' + NAME +
                " was <select id='qq12'><option value='' selected> </option><option value='0'>going forward</option><option value='1'>standing still</option><option value='2'>going back</option></select>.<br><br><button onclick='check2();'>Submit Answer</button>";

            qText[1] = NAME + '\'s <i>velocity</i> between points ' + lineSegments[q2Val] +
                " was <input id='qq13' size='6'> m/s<br><br><button onclick='check3();'>Submit Answer</button>";

            do {
                rr[0] = Math.floor(Math.random() * 7);
                rr[1] = Math.floor(Math.random() * 7);
                rr[2] = rr[1];
                rr[3] = Math.floor(Math.random() * 7);
                rr[4] = rr[3];
                rr[5] = Math.floor(Math.random() * 7);
                rr[6] = rr[5];
            } while (rr[0] == rr[1] || rr[1] == rr[3] || rr[3] == rr[5])

            qText[3] = '<i>Click on the graph above to move the points to match this description:</i><br><br>' + NAME +
                ' started at the ' + rr[0] + ' meter mark.<br>' + NAME + ' went ' + (rr[1] - rr[0] > 0 ? 'forward ' :
                    'back ') +
                Math.abs(rr[1] - rr[0]) + ' meters, stopped for 10 seconds,<br>went ' + (rr[3] - rr[1] > 0 ?
                    'forward ' :
                    'back ') + Math.abs(rr[3] - rr[1]) + ' meters, stopped for 10 seconds,<br>went ' + (rr[5] - rr[3] >
                    0 ?
                    'forward ' : 'back ') + Math.abs(rr[5] - rr[3]) +
                ' meters, and finally stopped for 10 seconds.<br><br><button onclick="check4();">Submit Answer</button>';

            $('#result').innerHTML = qText[qTypeList[qType]];
            
            if (qTypeList[qType] === 3) {
                $('#g1').style.display = 'none';
                $('#g2').style.display = 'block';
            } else {
                $('#g2').style.display = 'none';
                $('#g1').style.display = 'block';
            }
        }

        function check1() {
            var testQ1 = [];
            for (var idx = 0; idx < 12; idx++) {
                testQ1.push($('#qq' + idx).value);
                if (aa[idx] != testQ1[idx]) {
                    $('#qq' + idx).value = '';
                }
            }
            $('#result0').innerHTML = testQ1.join(' ') === aa.join(' ') ? 'correct' : 'incorrect';
            if (testQ1.join(' ') === aa.join(' ')) isC();
            setTimeout(function () {
                $('#result0').innerHTML = '';
            }, 1250);
        }

        function check2() {
            $('#result0').innerHTML = $('#qq12').value === q2Answer.toString() ? 'correct' : 'incorrect';
            if ($('#qq12').value === q2Answer.toString()) isC();
            setTimeout(function () {
                $('#result0').innerHTML = '';
            }, 1250);
        }

        function check3() {
            var ua = Math.abs(parseFloat($('#qq13').value) - q3Answer);
            $('#result0').innerHTML = (ua < 0.01 ? 'correct' : 'incorrect');
            if (ua < 0.01) isC();
            setTimeout(function () {
                $('#result0').innerHTML = '';
            }, 1250);
        }

        function check4() {
            $('#result0').innerHTML = (outPosY.join(' ') === rr.join(' ') ? 'correct' : 'incorrect');
            if (outPosY.join(' ') === rr.join(' ')) isC();
            setTimeout(function () {
                $('#result0').innerHTML = '';
            }, 1250);
        }

        function isC() {
            var ts = getScore();
            ts++;
            setScore(ts, 'Position-Time Graphs');
            qType++;
            if (qType > qTypeList.length - 1) qType = 0;
            setTimeout(function () {
                $('#result0').innerHTML = '';
            }, 1250);
            setTimeout(generateGraph, 1500);
        }

        var typesFromUrl = getParameter('qtypes');
        if (typesFromUrl) {
            let tempTypes = typesFromUrl.split(',');
            qTypeList = [];
            tempTypes.forEach((e) => {
                qTypeList.push(parseInt(e));
            });
        }

        setScoreFromCookie('Position-Time Graphs', (checkScoreCookie) => {});
        qType = parseInt(getScore()) % qTypeList.length;

        generateGraph();
    </script>
</body>

</html>